/* Original filter TX code (what we use in the portal that returns encoded data in web3 0.20) */
const filterTxs = options => new Promise((resolve, reject) => {
  const filter = web3.eth.filter(options);
  return filter.get((err, res) => {
    if (err) reject(err);
    resolve(res);
  });
});

const getListOfBadges = async () => {
  const options = {
    fromBlock: '6060723',
    toBlock: '6060723',
    address: '0xc45e027f0f9d7e90e612be02d4e710a632a9dba9',
  };
  const txData = await filterTxs(options);
  return txData;
};

/* Decode the log and then individual parameters */
const decodeData = txData =>
  txData.map((tx) => {
    const [,, encodedBadgeBeneficiary, encodedBadgeBuyer] = tx.topics;
    const { mgCid } = web3.eth.abi.decodeLog([
      { type: 'string', name: 'mgCid' },
      { type: 'uint256', name: 'badgeCost' },
      { type: 'uint8', name: 'badgeNumber' },
      { type: 'address', name: 'buyer' },
    ], tx.data);

    const badgeBeneficiary = web3.eth.abi.decodeParameters(['address'], encodedBadgeBeneficiary);
    const badgeBuyer = web3.eth.abi.decodeParameters(['address'], encodedBadgeBuyer);
    return { badgeBuyer: badgeBuyer['0'], badgeBeneficiary: badgeBeneficiary['0'], mgCid };
  });


const data = [{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x4056145ffab99f0ed3ff03e3b922689ffc78f1caa98967af0ac8910cf6bc6719","0x0000000000000000000000001875e398cd7fdce8ff5c9d4ce1ec904cae51692c","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd00000000000000000000000000000000000000000000000000000000000000317a6470754173346f535455587a39774a58386d59374c547a746d72473669367031686a6d4d454c674256396953314b6447000000000000000000000000000000","blockNumber":6060723,"transactionHash":"0x5c804949a32f9b025bc4b4c97b783495680ad5d989d20647e9e24203acfe2e6c","transactionIndex":192,"blockHash":"0x3a0c15f437ffb5aea6829b02ce68a9c345508efe7eefda08ad252fcda74436fc","logIndex":112,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x9bdcf3837beaa3540cd4f95a4c9af32f42caeed100db2ee0ace57c75eb7dc6b6","0x000000000000000000000000c8f4652cdbe54ee3a048b58ffc59b72e4298fc84","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd00000000000000000000000000000000000000000000000000000000000000317a647075416d31367a5261654b667345754878436670726b6e5437703863656b4e67347a35347a7773384253627678545a000000000000000000000000000000","blockNumber":6060841,"transactionHash":"0x368bfa2f0f20b62ccbe385a595085298474dac35972ab9f24d6331cab949a50e","transactionIndex":130,"blockHash":"0x87a25c70d19987288ed5bbb1365496407d586ec284255b94e74ee5e79570694c","logIndex":132,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x98693169d493141c1b2e1f3eb66596a884570008012238a74035e96e4ddd475b","0x00000000000000000000000035a7e40871a621d138e6e7e565ea23b90e333494","0x00000000000000000000000035a7e40871a621d138e6e7e565ea23b90e333494"],"data":"0x00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000035a7e40871a621d138e6e7e565ea23b90e33349400000000000000000000000000000000000000000000000000000000000000317a64707541764b63756d464343767a644c354179474c396157394d4e58547932733133716873354b7952396253504c7941000000000000000000000000000000","blockNumber":6075739,"transactionHash":"0xe89556112128266714cf0d69e2d29c1bd32090c360d292fbef299855121f5898","transactionIndex":56,"blockHash":"0xc1b4f34f9c1a30a06dda6d359d6c533825ac69c8122d21164db31e39970703fc","logIndex":85,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x793345e600257e6658c0d10802024019ad9134a465476184c5ecf07c3249171c","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd","0x0000000000000000000000002a3f7e5170ea8ca967f85f091ef84591f639e031"],"data":"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3f7e5170ea8ca967f85f091ef84591f639e03100000000000000000000000000000000000000000000000000000000000000317a647075423356674341375968615a774a3766464d6f366234585539536d50747a466a576269616761334b356631534153000000000000000000000000000000","blockNumber":6080178,"transactionHash":"0x829677334effb72bd726050634c53424ef9d97e0eeab5d65e9a03f6ce29102a2","transactionIndex":33,"blockHash":"0x3f0fa6479eda0e521fd276a6781f7c29dd1e063905805a0baa354ef69c61c13d","logIndex":17,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x4dfe80be42be6157d236b04e820c37300a2ca1c321dd324264f98c75d38510ac","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd","0x0000000000000000000000003ece8d40dac89ffb408f7cb5eaf24ab6a3135028"],"data":"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000010000000000000000000000003ece8d40dac89ffb408f7cb5eaf24ab6a313502800000000000000000000000000000000000000000000000000000000000000317a647075423356674341375968615a774a3766464d6f366234585539536d50747a466a576269616761334b356631534153000000000000000000000000000000","blockNumber":6080851,"transactionHash":"0x0558ffc95761067f02b6fc3b56b3124b8bf8fb7e267b875340cf28cfeeaf8781","transactionIndex":98,"blockHash":"0x3a2e2e894a63f4c6e3eba4e407537079fdff3274d84aa2313836fbbb2731cc43","logIndex":35,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x5711038e3c900607592e73717aa376029ad9fd3585df14c766c47767118a742b","0x00000000000000000000000084aa1925a0afb812ec4373e321e0b9b82f64574d","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd00000000000000000000000000000000000000000000000000000000000000317a64707542316a654e45576d523568486b43424e724b454d6459454779314b753459777a7064366f447a74674e69545164000000000000000000000000000000","blockNumber":6082705,"transactionHash":"0xd53e296cbd6b673292d2def566ec86bb8f4a69abe0dbe3ddb314368eb46fdae1","transactionIndex":125,"blockHash":"0x52398a5700d8936089ce5fd513c0b6a4ea0f7cd5ffe1f38a8f81c2f35a967967","logIndex":137,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x1116e0f17c2f53229221f688d3ad43ef522b6303b4c37a1dad0e2031f546af80","0x0000000000000000000000006e4125dd92515aa29efd24c8bbf09d17dd92f74b","0x000000000000000000000000d797d5784f43de300ec0d6bc34fc86023c5d71ce"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d797d5784f43de300ec0d6bc34fc86023c5d71ce00000000000000000000000000000000000000000000000000000000000000317a6470754174736954534d557052384b6d56616d587a4d6f7234475a4e56576676776a6b62505a394c6f3350633142696d000000000000000000000000000000","blockNumber":6086989,"transactionHash":"0xaf3c9da9442ab06f5d764664aa2815088b0bd192dc3e080ff5fe351fa0c35de5","transactionIndex":63,"blockHash":"0x9baae7fdba8ea1a65edac1059bafd80a20a15e6c5566cb9fd16c8f26e620180c","logIndex":81,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0xd879a57483739d5d90c17277f22970b188ec362bd3e46e28f3ff43cf24a4f1d4","0x00000000000000000000000084aa1925a0afb812ec4373e321e0b9b82f64574d","0x000000000000000000000000258ddd84abf61ba1d1e39f95d8863ee9ca218c06"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000001000000000000000000000000258ddd84abf61ba1d1e39f95d8863ee9ca218c0600000000000000000000000000000000000000000000000000000000000000317a64707542316a654e45576d523568486b43424e724b454d6459454779314b753459777a7064366f447a74674e69545164000000000000000000000000000000","blockNumber":6109821,"transactionHash":"0xf18a34cdd015ddeb49e9892f13667e0cac1a83db4214189117c65917c2f3e03f","transactionIndex":57,"blockHash":"0x6c3b6d4698f455f8e07cd1bae212d2ed012fcf0585c90dd216e97d7d7df414b5","logIndex":55,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x02231bbb32cf4c361b7ba14e8cb748bb4315c118e5eff92f09c319b953927f10","0x000000000000000000000000edd17db41ee47b8794b10802ac05806a66f3ab36","0x000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd"],"data":"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000374bd185ee19fd9f8682eb875e5d0546a8d58cdd00000000000000000000000000000000000000000000000000000000000000317a647075423253355656524d714a41734857683431397232556873747661476437744d7631517473735363674d70356544000000000000000000000000000000","blockNumber":6115688,"transactionHash":"0x1d454f983594711ad56d2264268145c3ee78edf87caa8e66519e159c4ed366ce","transactionIndex":282,"blockHash":"0x9e40cc9d60dc10e0f71a0b1e57caade445c371eabfbbb5834236af0e9bfc052c","logIndex":13,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x88f50250f5bfdabeadac0334ade3cc1c23cb509e531114983389b7d496d3f34d","0x0000000000000000000000001875e398cd7fdce8ff5c9d4ce1ec904cae51692c","0x0000000000000000000000009e56625509c2f60af937f23b7b532600390e8c8b"],"data":"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000010000000000000000000000009e56625509c2f60af937f23b7b532600390e8c8b00000000000000000000000000000000000000000000000000000000000000317a6470754173346f535455587a39774a58386d59374c547a746d72473669367031686a6d4d454c674256396953314b6447000000000000000000000000000000","blockNumber":6156461,"transactionHash":"0xc481e4031948e5517ed189104dbc3fc4ee34954206fe081d2777be67875417ae","transactionIndex":205,"blockHash":"0x4342c7ca51c530c82d832cbd4c61292df04771f277a41c3519a83ad2da5df09d","logIndex":68,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x7e510dfbe423dc26cd811c4eb456126c34fb53f3e5393f158b8f14c1a992a7a5","0x0000000000000000000000002abfe45394df8dcea4bc8006bab2cc5a850a9305","0x00000000000000000000000007a93218f692e18dd77d693d84568a5042df667b"],"data":"0x00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a93218f692e18dd77d693d84568a5042df667b00000000000000000000000000000000000000000000000000000000000000317a647075416f507341744c61763131666b6d4e35394158745462347379784d38587864727a4c37576237674a7636523644000000000000000000000000000000","blockNumber":6165627,"transactionHash":"0x2fecce4810f5430d1a819ac4e2e3cbd7c79aa95dccbdab061b2ef4cf2665d63f","transactionIndex":119,"blockHash":"0x6ce00d06b3849121c3b72db2691e7d52b7f953d50aad72a283d66ff5df9689c1","logIndex":105,"removed":false},{"address":"0xc45e027f0f9d7e90e612be02d4e710a632a9dba9","topics":["0xa0379fd2ef38be460c67ccd0b5aefaadc102ad26955f4875d0548f73a9432d91","0x81a2e8719407cc30a3655b8e09f074fa1473baf14365d419f8aed8491365379e","0x0000000000000000000000002abfe45394df8dcea4bc8006bab2cc5a850a9305","0x0000000000000000000000001318d3420b0169522eb8f3ef0830acee700a2eda"],"data":"0x0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000010000000000000000000000001318d3420b0169522eb8f3ef0830acee700a2eda00000000000000000000000000000000000000000000000000000000000000317a647075416f507341744c61763131666b6d4e35394158745462347379784d38587864727a4c37576237674a7636523644000000000000000000000000000000","blockNumber":6182987,"transactionHash":"0x6d021d4aedea8404ae4bc5514d702341494a254e4b784bf7a20f0574ed497f07","transactionIndex":59,"blockHash":"0xb9818dbf081f0907b5f4c1916cba51803f358b99187d34c925f3c7f419ebf2c0","logIndex":39,"removed":false}]

module.exports = data;
